<!DOCTYPE html>
<html lang="ca">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="icon" type="image/png" href="/favicon.png" />
    <title>GOD MODE // RECOVERY</title>
    <style>
        :root {
            --bg: #0f172a;
            --glass: rgba(15, 23, 42, 0.8);
            --border: rgba(255, 255, 255, 0.1);
            --neon: #00f2ff;
            --danger: #ff0055;
            --success: #00ff9d;
        }

        body {
            background: radial-gradient(circle at top right, #1e293b 0%, #000 100%);
            color: #fff;
            font-family: system-ui, -apple-system, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            text-align: center;
            padding: 20px;
        }

        .card {
            background: rgba(23, 25, 35, 0.7);
            padding: 40px 30px;
            border-radius: 24px;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            max-width: 400px;
            width: 100%;
            box-shadow: 0 24px 64px rgba(0, 0, 0, 0.4);
        }

        h1 {
            margin: 0 0 16px 0;
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #fff 0%, #a5a5a5 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        p {
            margin-bottom: 32px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.95rem;
        }

        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 16px;
            margin-bottom: 16px;
            border: none;
            border-radius: 16px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            gap: 10px;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background: #5D5FEF;
            color: white;
            box-shadow: 0 4px 12px rgba(93, 95, 239, 0.3);
        }

        .btn-primary:hover {
            background: #4A4CBF;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #10B981;
            color: white;
            display: none;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        #console {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 16px;
            text-align: left;
            font-family: 'Menlo', monospace;
            font-size: 0.75rem;
            margin-top: 24px;
            min-height: 100px;
            display: none;
            border: 1px solid rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.7);
        }

        .log-line {
            margin-bottom: 4px;
        }

        .success {
            color: #4ADE80;
        }

        .error {
            color: #F87171;
        }

        .info {
            color: #9CA3AF;
        }
    </style>
</head>

<body>
    <div class="card">
        <div style="font-size: 56px; margin-bottom: 15px;">üõ†Ô∏è</div>
        <h1>Eina de Rescat</h1>
        <p>Aquesta pantalla est√† protegida contra errors (Versi√≥ Neta). Fes clic per netejar el teu dispositiu.</p>
        <button id="cleanBtn" class="btn btn-primary" onclick="startRescue()">‚ö° EXECUTAR NETEJA TOTAL</button>
        <button id="homeBtn" class="btn btn-success" onclick="goHome()">üè† TORNAR A L'INICI</button>
        <div id="console"></div>
    </div>
    <script>
        function log(msg, type = 'info') { const el = document.getElementById('console'); el.style.display = 'block'; const line = document.createElement('div'); line.className = 'log-line ' + type; line.innerText = '> ' + msg; el.appendChild(line); el.scrollTop = el.scrollHeight; }
        async function startRescue() {
            const btn = document.getElementById('cleanBtn'); btn.disabled = true; btn.style.opacity = '0.5'; btn.innerText = 'Processant...';
            log('Iniciant protocol de neteja...', 'info');
            try {
                localStorage.clear(); sessionStorage.clear(); log('Local Storage: NETEJA OK', 'success');
                if ('caches' in window) { const keys = await caches.keys(); await Promise.all(keys.map(k => caches.delete(k))); log('Cache Storage: NETEJA OK', 'success'); }
                if ('serviceWorker' in navigator) { const regs = await navigator.serviceWorker.getRegistrations(); for (const reg of regs) { await reg.unregister(); } log('Service Workers: ELIMINATS', 'success'); }
                document.getElementById('cleanBtn').style.display = 'none'; document.getElementById('homeBtn').style.display = 'block'; log('--------------------------------', 'info'); log('SISTEMA NETEJAT. JA POTS REINICIAR.', 'success');
            } catch (e) { log('ERROR CR√çTIC: ' + e.message, 'error'); document.getElementById('homeBtn').style.display = 'block'; }
        }
        function goHome() { window.location.href = '/?fresh_start=' + Date.now(); }
    </script>
</body>

</html>